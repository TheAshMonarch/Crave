{% extends "base.html" %}

{% block title %}Favorites - My Recipes{% endblock %}

{% block content %}
<!-- Back Button -->
<div class="mb-6">
  <button onclick="history.back()"
          class="px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg shadow-md flex items-center gap-2">
    ← Back
  </button>
</div>

<p class="text-sm text-blue-600 font-semibold uppercase">Favorites</p>
<h2 class="text-3xl font-bold mt-2 mb-4">Your saved dishes</h2>
<p class="text-gray-500 max-w-xl mb-8">
  Here are the recipes you’ve marked as favorites. Enjoy easy access to your top picks!
</p>

{% if favorites|length == 0 %}
<div class="text-center text-gray-500 text-lg">You haven’t saved any recipes yet.</div>
{% else %}
<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
  {% for recipe in favorites %}
  <div class="bg-white rounded-2xl shadow p-4 hover:shadow-lg transition">
    <a href="{{ url_for('recipe_detail', recipe_id=recipe[0]) }}" class="block">
      <img loading="lazy" src="{{ url_for('static', filename='uploads/' + (recipe[7] or 'placeholder.jpg')) }}"
           alt="{{ recipe[2] }}" class="rounded-xl h-48 w-full object-cover mb-4" />
      <h3 class="text-lg font-semibold">{{ recipe[2] }}</h3>
    </a>

    <div class="mt-3 flex gap-2">
      <form action="{{ url_for('remove_favorite', recipe_id=recipe[0]) }}" method="post" class="favorite-form">
        <button class="text-red-500 text-sm font-semibold hover:underline">Remove Favorite</button>
      </form>
      
      {% if recipe[1] == session['user_id'] %}
        <a href="{{ url_for('edit_recipe', recipe_id=recipe[0]) }}"
           class="inline-flex items-center gap-1 px-3 py-1.5 bg-orange-500 hover:bg-orange-600 text-white text-sm font-medium rounded-lg shadow transition">
           Edit
        </a>
      {% endif %}
    </div>
  </div>
  {% endfor %}
</div>

<!-- Pagination -->
<div class="mt-10 flex justify-center">
  <div class="inline-flex items-center space-x-2">
    {% if page > 1 %}
    <a href="?page={{ page - 1 }}"
       class="px-4 py-2 text-sm bg-white border border-gray-300 rounded hover:bg-gray-100">Previous</a>
    {% endif %}
    <span class="px-4 py-2 text-sm text-gray-600">Page {{ page }}</span>
    {% if has_next %}
    <a href="?page={{ page + 1 }}"
       class="px-4 py-2 text-sm bg-white border border-gray-300 rounded hover:bg-gray-100">Next</a>
    {% endif %}
  </div>
</div>
{% endif %}
{% endblock %}
